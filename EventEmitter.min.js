/*
 EventEmitter v5.2.9f - git.io/ee
 Unlicense - http://unlicense.org/
 Oliver Caldwell - https://oli.me.uk/
 @preserve
 @FORK By Patrik Wallin, https://github.com/sirowl/
*/
(function(h){function g(){}function k(a,c){for(var d=a.length;d--;)if(a[d].listener===c)return d;return-1}function f(a){return function(){return this[a].apply(this,arguments)}}function m(a){return"function"===typeof a||a instanceof RegExp?!0:a&&"object"===typeof a?m(a.listener):!1}var b=g.prototype,n=h.EventEmitter;b.getListeners=function(a){var c=this._getEvents(),d;if(a instanceof RegExp){var e={};for(d in c)c.hasOwnProperty(d)&&a.test(d)&&(e[d]=c[d])}else e=c[a]||(c[a]=[]);return e};b.flattenListeners=
function(a){var c=[],d;for(d=0;d<a.length;d+=1)c.push(a[d].listener);return c};b.getListenersAsObject=function(a){var c=this.getListeners(a);if(c instanceof Array){var d={};d[a]=c}return d||c};b.addListener=function(a,c){if(!m(c))throw new TypeError("listener must be a function");var d=this.getListenersAsObject(a),e="object"===typeof c,b;for(b in d)d.hasOwnProperty(b)&&-1===k(d[b],c)&&d[b].push(e?c:{listener:c,once:!1});return this};b.on=f("addListener");b.addOnceListener=function(a,c){return this.addListener(a,
{listener:c,once:!0})};b.once=f("addOnceListener");b.defineEvent=function(a){this.getListeners(a);return this};b.defineEvents=function(a){for(var c=0;c<a.length;c+=1)this.defineEvent(a[c]);return this};b.removeListener=function(a,c){var d=this.getListenersAsObject(a),e;for(e in d)if(d.hasOwnProperty(e)){var b=k(d[e],c);-1!==b&&d[e].splice(b,1)}return this};b.off=f("removeListener");b.addListeners=function(a,c){return this.manipulateListeners(!1,a,c)};b.removeListeners=function(a,c){return this.manipulateListeners(!0,
a,c)};b.manipulateListeners=function(a,c,d){var b,l,f=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!==typeof c||c instanceof RegExp)for(b=d.length;b--;)f.call(this,c,d[b]);else for(b in c)c.hasOwnProperty(b)&&(l=c[b])&&("function"===typeof l?f.call(this,b,l):a.call(this,b,l));return this};b.removeEvent=function(a){var c=typeof a,b=this._getEvents(),e;if("string"===c)delete b[a];else if(a instanceof RegExp)for(e in b)b.hasOwnProperty(e)&&a.test(e)&&delete b[e];
else delete this._events;return this};b.removeAllListeners=f("removeEvent");b.emitEvent=function(a,c){var b=this.getListenersAsObject(a),e,f;for(f in b)if(b.hasOwnProperty(f)){var h=b[f].slice(0);for(e=0;e<h.length;e++){var g=h[e];!0===g.once&&this.removeListener(a,g.listener);var k=g.listener.apply(this,c||[]);k===this._getOnceReturnValue()&&this.removeListener(a,g.listener)}}return this};b.trigger=f("emitEvent");b.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,
b)};b.setOnceReturnValue=function(a){this._onceReturnValue=a;return this};b._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};b._getEvents=function(){return this._events||(this._events={})};g.noConflict=function(){h.EventEmitter=n;return g};h&&(h.EventEmitter=g)})("undefined"!==typeof window?window:this||{});